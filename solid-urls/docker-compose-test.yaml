services:
  root_api:
  # docker run --rm -it -p 4200:4200 -v ./src:/app/src solid-urls-root_api
    build:
      context: ./client/
      dockerfile: ./Dockerfile.dev
    networks:
      - frontend
    ports:
      - "4200:4200"
    working_dir: /app
    volumes:
      - ./client/src:/app/src
    environment:
      - NODE_ENV=development
    entrypoint: 
      - npm
      - run
      - start
  read_api:
    image: api_container
    build:
      context: ./platform/
      dockerfile: ./Dockerfile
      target: test
    networks:
      - frontend
    volumes:
      - ./platform/src:/app/src
    working_dir: /app
    entrypoint: 
      - ./gradlew
      - test
      - --continuous 
  # db:
  #   image: postgres:latest
  #   environment:
  #     POSTGRES_DB: mydatabase
  #     POSTGRES_USER: user
  #     POSTGRES_PASSWORD: password

networks:
  frontend:
  backend: